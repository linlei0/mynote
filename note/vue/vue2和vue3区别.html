<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue2 和 vue3 | linlei space</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="成功只会淘汰懒惰的人，平庸也需要努力！">
    
    <link rel="preload" href="/note/assets/css/0.styles.19e75038.css" as="style"><link rel="preload" href="/note/assets/js/app.39547da1.js" as="script"><link rel="preload" href="/note/assets/js/2.c3539c26.js" as="script"><link rel="preload" href="/note/assets/js/35.87dcf37a.js" as="script"><link rel="prefetch" href="/note/assets/js/10.72f7ab31.js"><link rel="prefetch" href="/note/assets/js/11.311b3a53.js"><link rel="prefetch" href="/note/assets/js/12.883d287d.js"><link rel="prefetch" href="/note/assets/js/13.acba9f06.js"><link rel="prefetch" href="/note/assets/js/14.0128a1d9.js"><link rel="prefetch" href="/note/assets/js/15.e678443c.js"><link rel="prefetch" href="/note/assets/js/16.43bdf88c.js"><link rel="prefetch" href="/note/assets/js/17.f1a34547.js"><link rel="prefetch" href="/note/assets/js/18.75b7d991.js"><link rel="prefetch" href="/note/assets/js/19.4f280339.js"><link rel="prefetch" href="/note/assets/js/20.a0ae2bf4.js"><link rel="prefetch" href="/note/assets/js/21.261ca275.js"><link rel="prefetch" href="/note/assets/js/22.6f94bc3d.js"><link rel="prefetch" href="/note/assets/js/23.890c5482.js"><link rel="prefetch" href="/note/assets/js/24.c0983c03.js"><link rel="prefetch" href="/note/assets/js/25.faf68a72.js"><link rel="prefetch" href="/note/assets/js/26.bb155049.js"><link rel="prefetch" href="/note/assets/js/27.6d25092c.js"><link rel="prefetch" href="/note/assets/js/28.e48d335b.js"><link rel="prefetch" href="/note/assets/js/29.a21ca56e.js"><link rel="prefetch" href="/note/assets/js/3.69b4f426.js"><link rel="prefetch" href="/note/assets/js/30.6253c62f.js"><link rel="prefetch" href="/note/assets/js/31.47f4584a.js"><link rel="prefetch" href="/note/assets/js/32.833e7bbc.js"><link rel="prefetch" href="/note/assets/js/33.e5662ad1.js"><link rel="prefetch" href="/note/assets/js/34.62de4fd2.js"><link rel="prefetch" href="/note/assets/js/36.80da8758.js"><link rel="prefetch" href="/note/assets/js/37.10ec91da.js"><link rel="prefetch" href="/note/assets/js/38.aad21191.js"><link rel="prefetch" href="/note/assets/js/39.8e17e2d0.js"><link rel="prefetch" href="/note/assets/js/4.6a2698d4.js"><link rel="prefetch" href="/note/assets/js/40.c91527d7.js"><link rel="prefetch" href="/note/assets/js/41.96f6f4d5.js"><link rel="prefetch" href="/note/assets/js/42.a5bf8bbd.js"><link rel="prefetch" href="/note/assets/js/43.d718700b.js"><link rel="prefetch" href="/note/assets/js/44.64edf3f2.js"><link rel="prefetch" href="/note/assets/js/45.5f2dda9f.js"><link rel="prefetch" href="/note/assets/js/46.8efc4388.js"><link rel="prefetch" href="/note/assets/js/47.e4fe66f7.js"><link rel="prefetch" href="/note/assets/js/48.2d4c3adb.js"><link rel="prefetch" href="/note/assets/js/49.e861c0f0.js"><link rel="prefetch" href="/note/assets/js/5.01060300.js"><link rel="prefetch" href="/note/assets/js/50.8e5126bc.js"><link rel="prefetch" href="/note/assets/js/6.e9af0303.js"><link rel="prefetch" href="/note/assets/js/7.9cdbc468.js"><link rel="prefetch" href="/note/assets/js/8.b1eb73f5.js"><link rel="prefetch" href="/note/assets/js/9.46d0ff61.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.19e75038.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">linlei space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/note/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  每日
</a></li><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/note/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  每日
</a></li><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html&amp;浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/note/vue/源码.html" class="sidebar-link">vue2源码</a></li><li><a href="/note/note/vue/$set原理.html" class="sidebar-link">Vue.\$set 原理</a></li><li><a href="/note/note/vue/nuxt.html" class="sidebar-link">nuxt 基础使用</a></li><li><a href="/note/note/vue/vue2基础.html" class="sidebar-link">vue2 基础</a></li><li><a href="/note/note/vue/vue2进阶.html" class="sidebar-link">vue2 进阶</a></li><li><a href="/note/note/vue/vue3+rollup实现个人组件库.html" class="sidebar-link">vue3+rollup实现个人组件库</a></li><li><a href="/note/note/vue/vue3实现一个toast组件.html" class="sidebar-link">vue3实现toast</a></li><li><a href="/note/note/vue/vue3实现upload组件.html" class="sidebar-link">vue3实现upload组件</a></li><li><a href="/note/note/vue/vue2和vue3区别.html" class="active sidebar-link">vue2 和 vue3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/note/vue/vue2和vue3区别.html#vue2-和-vue3-有什么区别" class="sidebar-link">vue2 和 vue3 有什么区别</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2和vue3区别.html#如何理解-composition-api-和-options-api" class="sidebar-link">如何理解 Composition API 和 Options API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/note/vue/vue2和vue3区别.html#composition-api-带来了什么" class="sidebar-link">Composition API 带来了什么</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2和vue3区别.html#如何选择" class="sidebar-link">如何选择</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2和vue3区别.html#如何正确理解-composition-api" class="sidebar-link">如何正确理解 Composition API</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2和vue3区别.html#如何理解-ref-toref-和-torefs" class="sidebar-link">如何理解 ref toRef 和 toRefs</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue2-和-vue3"><a href="#vue2-和-vue3" class="header-anchor">#</a> vue2 和 vue3</h1> <h2 id="vue2-和-vue3-有什么区别"><a href="#vue2-和-vue3-有什么区别" class="header-anchor">#</a> vue2 和 vue3 有什么区别</h2> <p>beforeDestory 改为 beforeUnmont</p> <p>destoryed 改为 unmonted</p> <p>其他继续沿用</p> <h2 id="如何理解-composition-api-和-options-api"><a href="#如何理解-composition-api-和-options-api" class="header-anchor">#</a> 如何理解 Composition API 和 Options API</h2> <h3 id="composition-api-带来了什么"><a href="#composition-api-带来了什么" class="header-anchor">#</a> Composition API 带来了什么</h3> <ul><li>更好的代码组织</li> <li>更好的逻辑复用</li> <li>更好的类型推导</li></ul> <h3 id="如何选择"><a href="#如何选择" class="header-anchor">#</a> 如何选择</h3> <ul><li>不建议共用，会引起混乱</li> <li>小型项目，业务逻辑简单 Options API</li> <li>中大型项目，逻辑复杂，用 Composition API</li></ul> <h3 id="如何正确理解-composition-api"><a href="#如何正确理解-composition-api" class="header-anchor">#</a> 如何正确理解 Composition API</h3> <ul><li>Composition API 属于高阶技巧，不是基础必会</li> <li>Composition API 是为了解决复杂业务逻辑设计</li> <li>Composition API 就像 Hooks 在 react 中的地位</li></ul> <h3 id="如何理解-ref-toref-和-torefs"><a href="#如何理解-ref-toref-和-torefs" class="header-anchor">#</a> 如何理解 ref toRef 和 toRefs</h3> <p><strong>ref</strong></p> <ul><li>生成值类型的响应式数据</li> <li>可用于模版和 reactive</li> <li>通过.vaule 修改值</li> <li>可以获取到 dom 元素</li></ul> <p><strong>toRef</strong></p> <p><strong>toRefs</strong></p> <p><strong>为何需要 ref</strong></p> <p>返回值类型，会丢失响应式</p> <p>如在 setup，computed，合成函数，都有可能返回值类型</p> <p>vue 如果不定义 ref，用户将自造 ref，反而混乱</p> <p><strong>为何需要.value</strong></p> <p>可以用 computed 来做讲解</p> <p><strong>vue3 升级了那些重要功能</strong></p> <ul><li><p>createApp</p></li> <li><p>emits 属性</p></li> <li><p>fragment
组件不必包裹在 div</p></li> <li><p>移除了.sync</p> <MyComponent></MyComponent> <MyComponent></MyComponent></li> <li><p>异步组件
</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  componets<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;my-component&quot;</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../a.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> defineAsyncComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  componets<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;my-component&quot;</span><span class="token operator">:</span> <span class="token function">defineAsyncComponent</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;../a.vue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>移除 filter</p></li> <li><p>teleport</p></li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>teleport</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>body<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>teleport</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>Suspense</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Test1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Test1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
      loading...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li><p>composition Api</p> <ul><li>reative</li> <li>ref 相关</li> <li>readonly</li> <li>watch 和 watchEffect</li> <li>setup</li> <li>生命周期钩子函数</li></ul> <p><strong>compositon Api 实现逻辑复用</strong></p> <ul><li>抽离逻辑代码到一个函数</li> <li>函数命名约定为 useXxx（React Hooks 也是）</li> <li>在 setup 中引用</li></ul> <p><strong>vue 如何实现响应式</strong></p> <p><strong>v-model 参数用法</strong></p> <p><strong>watch 和 watchEffect 的区别</strong></p> <ul><li>两者都可以监听 data 属性变化</li> <li>watch 需要明确的属性</li> <li>wacth 需要指定监听的属性，watchEffect 内部写的什么就监听什么</li></ul> <p><strong>setup 获取组件实例</strong></p> <p>getCurrentInstance</p> <p><strong>vue3 为何比 vue2 快</strong></p> <ul><li>Proxy 响应式</li> <li>PatchFlag
<ul><li>编译模版时，动态节点做标记</li> <li>标记，分为不同的类型，如 TEXT PROPS</li> <li>diff 算法时，可以区分静态节点，以及不同类型的动态节点</li></ul></li> <li>hoistStatic
<ul><li>将静态节点的定义，提升到副作用域，缓存起来</li> <li>多个相邻的静态节点，会被合并起来</li> <li>拿空间换时间的策略</li></ul></li> <li>cacheHandler
<ul><li>缓存事件</li></ul></li> <li>SSR 优化
<ul><li>静态节点直接输出，绕过 vdom</li> <li>动态节点仍然需要渲染</li></ul></li> <li>tree-shaking
<ul><li>编译的时候根据不同的情况引入不同的 API</li></ul></li></ul></li></ul> <p><strong>Vite</strong></p> <ul><li>Vite 是什么？
<ul><li>一个前端打包工具</li></ul></li> <li>Vite 为什么启动快？
<ul><li>开发环境使用 ES6 Module，无需打包，非常快</li> <li>生产环境使用 rollup，并不会快很多</li></ul></li></ul> <p><strong>Composition API 和 React Hooks 对比</strong></p> <ul><li>前者 setup 只会被调用一次，后者会被多次调用</li> <li>前者无需 useMemo use Callback，因为 setup 只调用一次</li> <li>前者无需考虑调用顺序，而后者需要保证 hooks 的调用顺序一致</li> <li>reactive + ref 比 useState 更难理解</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com//edit/master/docs/note/vue/vue2和vue3区别.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">11/26/2021, 9:25:12 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/note/vue/vue3实现upload组件.html" class="prev">
        vue3实现upload组件
      </a></span> <span class="next"><a href="/note/note/React/React-fiber.html">
        React-fiber
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.39547da1.js" defer></script><script src="/note/assets/js/2.c3539c26.js" defer></script><script src="/note/assets/js/35.87dcf37a.js" defer></script>
  </body>
</html>
