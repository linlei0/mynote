# css和js渲染阻塞
## 浏览器渲染引擎
### 主要模块
* 一个渲染引擎主要包括：HTML解析器，CSS解析器，javascript引擎，布局layout模块，绘图模块

## 阻塞渲染

### 关于css阻塞
**申明：只有link引入的外部css才会引起阻塞**
  1. style标签中的样式：
    (1).由html解析器进行解析
    (2).不阻塞浏览器渲染（可能会产生闪屏的现象）
    (3).不阻塞dom解析

  2. link引入的外部css样式（推荐使用方式）
    (1).由css解析器进行解析
    (2).阻塞浏览器渲染（可以理由这种阻塞避免闪屏现象）
    (3).阻塞其后面的js语句的执行
    (4).不阻塞dom的解析（绝大多数浏览器的工作方式）
  3. 优化核心理念：尽可能快的提高外部css加载速度
    (1).使用CDN节点进行外部资源加速
    (2).对css进行压缩（利用打包工具，webpack，gulp等）
    (3).减少http请求，将多个css文件合并
    (4).优化样式的代码
  
  ### 关于js阻塞
   1. 阻塞后续DOM解析：
      原因：浏览器不知道后续脚本的内容，如果先去解析下面的DOM，而随后的js删除了后面所有DOM，
      那么浏览器就做了无用功，浏览器无法预估脚本里面具体做了什么操做。
   2. 阻塞页面渲染：
      原因：js中也可以给DOM设置样式，浏览器等该脚本执行完毕，渲染出一个最终结果，避免做无用功。
   3. 阻塞后续js的执行：
      原因：维护依赖关系，例如：使用bootstrap不许引用jquery
  ### 备注
  1. css的解析和js是互斥的，css解析的时候js停止工作，js解析的时候css停止工作。
  2. 无论css阻塞还是js阻塞，都不会阻塞浏览器加载外部资源（蹄片，视频，样式，脚本等）
     原因：浏览器始终处于一种“先把请求发出去”的工作模式，只要涉及到网络请求的内容，无论是图片，样式
     脚本都会先发送请求去获取资源，至于资源到本地如何使用，由浏览器自己协调，这种做法效率很高。