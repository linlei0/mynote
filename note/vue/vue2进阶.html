<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue2 进阶 | linlei space</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="努力向前">
    
    <link rel="preload" href="/note/assets/css/0.styles.19e75038.css" as="style"><link rel="preload" href="/note/assets/js/app.199aedc5.js" as="script"><link rel="preload" href="/note/assets/js/2.0afee9a0.js" as="script"><link rel="preload" href="/note/assets/js/3.282deeef.js" as="script"><link rel="prefetch" href="/note/assets/js/10.201e0283.js"><link rel="prefetch" href="/note/assets/js/11.55ae548e.js"><link rel="prefetch" href="/note/assets/js/12.d9918bb3.js"><link rel="prefetch" href="/note/assets/js/13.06f63830.js"><link rel="prefetch" href="/note/assets/js/14.0b2405fd.js"><link rel="prefetch" href="/note/assets/js/15.d69c5c7c.js"><link rel="prefetch" href="/note/assets/js/16.ca5d48b5.js"><link rel="prefetch" href="/note/assets/js/17.2a9c68d7.js"><link rel="prefetch" href="/note/assets/js/18.c8420a14.js"><link rel="prefetch" href="/note/assets/js/19.500ece9b.js"><link rel="prefetch" href="/note/assets/js/20.98f6ee34.js"><link rel="prefetch" href="/note/assets/js/21.d0b152aa.js"><link rel="prefetch" href="/note/assets/js/22.8f916715.js"><link rel="prefetch" href="/note/assets/js/23.1f8741a1.js"><link rel="prefetch" href="/note/assets/js/24.90b65f86.js"><link rel="prefetch" href="/note/assets/js/25.f264a449.js"><link rel="prefetch" href="/note/assets/js/26.1ee552e4.js"><link rel="prefetch" href="/note/assets/js/27.2d20a69d.js"><link rel="prefetch" href="/note/assets/js/28.ab0cf827.js"><link rel="prefetch" href="/note/assets/js/29.4f76552f.js"><link rel="prefetch" href="/note/assets/js/30.98dd7234.js"><link rel="prefetch" href="/note/assets/js/4.465513f1.js"><link rel="prefetch" href="/note/assets/js/5.248d6bee.js"><link rel="prefetch" href="/note/assets/js/6.bd0a0487.js"><link rel="prefetch" href="/note/assets/js/7.b71a37af.js"><link rel="prefetch" href="/note/assets/js/8.858740d7.js"><link rel="prefetch" href="/note/assets/js/9.87e6745a.js">
    <link rel="stylesheet" href="/note/assets/css/0.styles.19e75038.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/note/" class="home-link router-link-active"><!----> <span class="site-name">linlei space</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/note/note/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  每日
</a></li><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/note/note/" class="nav-link router-link-active">
  博客
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><span class="title">算法</span> <span class="arrow down"></span></button> <button type="button" aria-label="算法" class="mobile-dropdown-title"><span class="title">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  每日
</a></li><li class="dropdown-item"><!----> <a href="/note/" class="nav-link">
  LeetCode
</a></li></ul></div></div> <a href="https://github.com//" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>html&amp;浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>性能</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/note/note/vue/源码.html" class="sidebar-link">vue2源码</a></li><li><a href="/note/note/vue/nuxt.html" class="sidebar-link">nuxt 基础使用</a></li><li><a href="/note/note/vue/vue2基础.html" class="sidebar-link">vue2 基础</a></li><li><a href="/note/note/vue/vue2进阶.html" class="active sidebar-link">vue2 进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#vue-注册全局方法" class="sidebar-link">Vue 注册全局方法</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#vue-双向绑定原理" class="sidebar-link">Vue 双向绑定原理</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#什么是-mvvm" class="sidebar-link">什么是 MVVM</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#computed-和-watch-的区别" class="sidebar-link">computed 和 watch 的区别</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#vue-模版编译过程" class="sidebar-link">vue 模版编译过程</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#vue-data-为什么必须是函数" class="sidebar-link">Vue data 为什么必须是函数</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#子组件可以直接改变父组件的数据吗-为什么" class="sidebar-link">子组件可以直接改变父组件的数据吗？为什么</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#vue-的父组件和子组件生命周期钩子函数执行顺序" class="sidebar-link">Vue 的父组件和子组件生命周期钩子函数执行顺序？</a></li><li class="sidebar-sub-header"><a href="/note/note/vue/vue2进阶.html#vue-中-key-的作用-为什么不能使用索引作为-key" class="sidebar-link">vue 中 key 的作用？为什么不能使用索引作为 key</a></li></ul></li><li><a href="/note/note/vue/vue3+rollup实现个人组件库.html" class="sidebar-link">vue3+rollup实现个人组件库</a></li><li><a href="/note/note/vue/vue3实现一个toast组件.html" class="sidebar-link">vue3实现toast</a></li><li><a href="/note/note/vue/vue3实现upload组件.html" class="sidebar-link">vue3实现upload组件</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vue2-进阶"><a href="#vue2-进阶" class="header-anchor">#</a> vue2 进阶</h1> <h2 id="vue-注册全局方法"><a href="#vue-注册全局方法" class="header-anchor">#</a> Vue 注册全局方法</h2> <ol><li>挂载在 Vue.prototype 上面</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>globalXX <span class="token operator">=</span> <span class="token string">&quot;xxx&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>使用 mixins 采用全局混入的方式</li></ol> <ul><li>创建一个 mixins 文件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> globalMixins <span class="token operator">=</span> <span class="token punctuation">{</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> globalMixins<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>在 main.js 中进行全局注册</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> globalMixins <span class="token keyword">from</span> <span class="token string">&quot;./mixins/globalMixins&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">mixins</span><span class="token punctuation">(</span>globalMixins<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>使用 Plugin 方式</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;getData&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> plugin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">install</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$getData <span class="token operator">=</span> getData<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> plugin<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>在 main.js 中进行全局注册</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> plugin <span class="token keyword">from</span> <span class="token string">&quot;./plugin/plugin&quot;</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="vue-双向绑定原理"><a href="#vue-双向绑定原理" class="header-anchor">#</a> Vue 双向绑定原理</h2> <ol><li><p>原理</p> <p>View 的变化能实时让 Model 发生变化，而 Model 的变化也能更新到 View。如下图：
<img src="data:image/jpeg;base64,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" alt="vue基本原理"></p></li></ol> <p>Vue 采用<strong>数据劫持&amp;发布定于模式的方式</strong>，通过<strong>Object.defineProperty()</strong>，方法来劫持（监控）各属性的 getter，setter，并在数据发生变化时通知订阅者，触发相应的监听回调。</p> <p>要实现 Vue 的双向绑定大致可以划分是三个模块，如图：
<img src="/note/assets/img/vue2.a049d147.jpeg" alt="vue双向绑定原理"></p> <ul><li><p>Observer</p> <p><strong>数据监听器</strong>，负责对数据对象的所有数据进行监听（数据劫持），监听到数据变化通知订阅者。</p></li> <li><p>Complier</p> <p><strong>指令解析器</strong>，扫描模版，并对指令进行解析，然后绑定指定事件。</p></li> <li><p>Watcher</p> <p><strong>Watcher 订阅者</strong>，关联<strong>Observer</strong>，和<strong>Complier</strong>，能够订阅并收到属性变动的通知，执行指令绑定的相应操作，更新视图。Update()是他自身的一个方法，用于执行 Compiler 中绑定的回调，更新视图。</p></li></ul> <p>模版渲染解析时 Watcher 会对应绑定指令（一对一）。
此时会通过调用订阅者 watcher 初始化（watcher 中的 get 方法），去触发对应属性在发布者 observer 里（Object.defineProperty()）的 getter，Observer 会判断是不是通过 watcher 初始化调用（Dep.target 实例化之后会被清空），只有是才会通过 dep 类依赖收集。</p> <p>observer 通过 depend 通知 Dep 类收集（addDep 方法，在 watcher 类中，会传入当前 Dep 实例调用本身）当前该订阅者（watcher）中的触发更新的方法，同时第一次初始化 watcher.update()初始化视图。此后每次的数据更新都会通过 oberver 中的 setter 去触发 dep 类中的回调 update 执行收集依赖的所有方法更新订阅者中的状态同时更新视图。</p> <p>observer 在处理对象和数组的时候，如果是数组，并且调用的方法会改变数组长度，则会重新增加索引之后更新数组，进行重新监听。如果是对象则通过对象的 getter 获取值 setter 更新值。</p> <h2 id="什么是-mvvm"><a href="#什么是-mvvm" class="header-anchor">#</a> 什么是 MVVM</h2> <p>MVVM 源自于经典的 Model–View–Controller（MVC）模式 ，MVVM 的出现促进了前端开发与后端业务逻辑的分离，极大地提高了前端开发效率，MVVM 的核心是 ViewModel 层，它就像是一个中转站（value converter），负责转换 Model 中的数据对象来让数据变得更容易管理和使用，该层向上与视图层进行双向数据绑定，向下与 Model 层通过接口请求进行数据交互，起呈上启下作用。如下图所示：</p> <p><img src="/note/assets/img/mvvm.7fc62204.png" alt="MVVM"></p> <ul><li>View
View 是视图层，也就是用户界面。前端主要由 HTML 和 CSS 来构建 。</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{ message }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>Model</li></ul> <p>Model 是指数据模型，泛指后端进行的各种业务逻辑处理和数据操控，对于前端来说就是后端提供的 api 接口。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>ViewModel
ViewModel 是由前端开发人员组织生成和维护的视图数据层。在这一层，前端开发者对从后端获取的 Model 数据进行转换处理，做二次封装，以生成符合 View 层使用预期的视图数据模型。需要注意的是 ViewModel 所封装出来的数据模型包括视图的状态和行为两部分，而 Model 层的数据模型是只包含状态的，比如页面的这一块展示什么，而页面加载进来时发生什么，点击这一块发生什么，这一块滚动时发生什么这些都属于视图行为（交互），视图状态和行为都封装在了 ViewModel 里。这样的封装使得 ViewModel 可以完整地去描述 View 层。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      message<span class="token operator">:</span> <span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">changeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;new message&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="computed-和-watch-的区别"><a href="#computed-和-watch-的区别" class="header-anchor">#</a> computed 和 watch 的区别</h2> <p><strong>computed</strong></p> <p>computed 是计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed 的值
<strong>watch</strong>
更多的是「观察」的作用，类似于某些数据的监听回调 ，每当监听的数据变化时都会执行回调进行后续操作</p> <p>运用场景：</p> <ul><li>当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算</li> <li>当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch 选项允许我们执行异步操作 ( 访问一个 API )，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的</li></ul> <h2 id="vue-模版编译过程"><a href="#vue-模版编译过程" class="header-anchor">#</a> vue 模版编译过程</h2> <h2 id="vue-data-为什么必须是函数"><a href="#vue-data-为什么必须是函数" class="header-anchor">#</a> Vue data 为什么必须是函数</h2> <p>因为组件是用来复用的，且 JS 的对象都是引用类型，如果组件中的 data 是一个对象，那么这样作用域没有隔离，子组件中的属性会相互影响，如果组件中的 data 返回的是一个函数那么每个实例，可以维护一份被返回对象的拷贝属性，组件实例之间的 data 属性不会相互影响，而<code>new Vue</code>的实例不会被复用，因此不存在引用对象的问题。</p> <h2 id="子组件可以直接改变父组件的数据吗-为什么"><a href="#子组件可以直接改变父组件的数据吗-为什么" class="header-anchor">#</a> 子组件可以直接改变父组件的数据吗？为什么</h2> <p>不可以，由于 vue 的单向数据流，当子组件改变父组件数据时，Vue 会在浏览器的控制台中发出警告，如果需要修改可以使用<code>$emit</code>发射事件，或者使用<code>.sync</code>修饰符。</p> <h2 id="vue-的父组件和子组件生命周期钩子函数执行顺序"><a href="#vue-的父组件和子组件生命周期钩子函数执行顺序" class="header-anchor">#</a> Vue 的父组件和子组件生命周期钩子函数执行顺序？</h2> <p>Vue 的父组件和子组件生命周期钩子函数执行顺序可以归类为以下 4 部分：</p> <ul><li><p>加载渲染过程
父 beforeCreate -&gt; 父 created -&gt; 父 beforeMount -&gt; 子 beforeCreate -&gt; 子 created -&gt; 子 beforeMount -&gt; 子 mounted -&gt; 父 mounted</p></li> <li><p>子组件更新过程
父 beforeUpdate -&gt; 子 beforeUpdate -&gt; 子 updated -&gt; 父 updated</p></li> <li><p>父组件更新过程
父 beforeUpdate -&gt; 父 updated</p></li></ul> <ul><li>销毁过程
父 beforeDestroy -&gt; 子 beforeDestroy -&gt; 子 destroyed -&gt; 父 destroyed</li></ul> <h2 id="vue-中-key-的作用-为什么不能使用索引作为-key"><a href="#vue-中-key-的作用-为什么不能使用索引作为-key" class="header-anchor">#</a> vue 中 key 的作用？为什么不能使用索引作为 key</h2> <p>key 是为 Vue 中 vnode 的唯一标记，通过这个 key，我们的 diff 操作可以更准确、更快速。</p> <ul><li><p>更准确：因为带 key 就不是就地复用了，在 sameNode 函数 a.key === b.key 对比中可以避免就地复用的情况。所以会更加准确。</p></li> <li><p>更快速：利用 key 的唯一性生成 map 对象来获取对应节点，比遍历方式更快，源码如下：</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createKeyToOldIdx</span><span class="token punctuation">(</span><span class="token parameter">children<span class="token punctuation">,</span> beginIdx<span class="token punctuation">,</span> endIdx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> i<span class="token punctuation">,</span> key<span class="token punctuation">;</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> beginIdx<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> endIdx<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    key <span class="token operator">=</span> children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>key<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isDef</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> map<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果使用了数组的索引，当数组的长度变化时，其索引也会跟着变化，导致标记的 key 会移动位置，此时再通过 sameNode 找到的组件就会出现偏差。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com//edit/master/docs/note/vue/vue2进阶.md" target="_blank" rel="noopener noreferrer">在 Github 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">8/3/2021, 7:12:51 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/note/note/vue/vue2基础.html" class="prev">
        vue2 基础
      </a></span> <span class="next"><a href="/note/note/vue/vue3+rollup实现个人组件库.html">
        vue3+rollup实现个人组件库
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/note/assets/js/app.199aedc5.js" defer></script><script src="/note/assets/js/2.0afee9a0.js" defer></script><script src="/note/assets/js/3.282deeef.js" defer></script>
  </body>
</html>
